---
layout: post
title: 'Officer: The ruby lock server and client'
comments: false
share: false
date: 2011-01-23
type: post
tags:
- eventmachine
- lockserver
- officer
- ruby
---
<p><strong>What is it?</strong><br /><a href="https://github.com/chadrem/officer">Officer</a> is an easy to use distributed lock server and client written in Ruby. &nbsp;Wikipedia calls it a <a href="http://en.wikipedia.org/wiki/Distributed_lock_manager">Distributed Lock Manager (DLM)</a>.</p>
<p><strong>Why would I use it?</strong><br />You use it to prevent <a href="http://en.wikipedia.org/wiki/Race_condition">race conditions</a>&nbsp;in your distributed applications. &nbsp;It can be used with any Ruby app including Rails. &nbsp;Officer helps you coordinate access to shared resources in a predictable way since a lock can be held by only one client at a time. &nbsp;Other clients will queue in an orderly fashion and wait their turn.</p>
<p><strong>How did it come about?</strong><br />Back in 2009, <a href="http://www.bluefroggaming.com">my company</a> wrote a Facebook game named <a href="http://apps.facebook.com/starfleet_commander/">Starfleet Commander</a>. &nbsp;It's a highly competitive, massively multiplayer, real time strategy game. &nbsp;In other words, it's a Ruby on Rails application that encourages customers to find and exploit race conditions. &nbsp;I wrote Officer so that I could fix this problem with minimal changes to the game code.</p>
<p><strong>Is it only useful for games?</strong><br />Although it was originally designed for a game, it can be used with any application that needs distributed exclusive locks. &nbsp;Most typical web apps don't benefit from Officer since there is little purpose in exploiting their race conditions.</p>
<p><strong>What are the alternatives?</strong><br />Officer was originally inspired by <a href="http://dustin.github.com/elock/">Elock</a>. &nbsp;Unfortunately for me, I encountered a serious memory leak in Elock and thus Officer was created. &nbsp;In many cases, messaging infrastructure&nbsp;is a better choice than a lock server. &nbsp;One such product is&nbsp;<a href="http://www.rabbitmq.com">RabbitMQ</a>. &nbsp;This wasn't an option for Starfleet Commander&nbsp;since it would have required significant&nbsp;re-architecting&nbsp;of the code base.</p>
<p><strong>What about languages other than Ruby?</strong><br />Officer's network protocol is a very simple JSON syntax so it should be relatively straightforward to port the client to other languages. &nbsp;Please contribute them if you have the time.</p>
<p><strong>How do I find out more?</strong><br />Check out <a href="https://github.com/chadrem/officer">Officer on Github</a>&nbsp;for installation and usage instructions. &nbsp;Feel free to contact me if you have questions or find problems with it. &nbsp;My email is under my picture.</p>
